<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="stylesheet" href="./frontEndPackage/owlcarousel/owl.carousel.min.css" />
        <link rel="stylesheet" href="./frontEndPackage/owlcarousel/owl.theme.default.min.css" />
        <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css"
            integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N"
            crossorigin="anonymous"
        />
        <link rel="stylesheet" href="./frontEndPackage/bootstrap-icons/bootstrap-icons.css" />

        <link rel="stylesheet" href="./frontEndPackage/style/all.css" />
        <title>Shimadzu</title>
    </head>
    <body>
        <div id="app">
            <!-- <section class="nav-container">
                <nav class="container-lg navbar p-0 p-lg-3 navbar-expand-lg">
                    <div class="brand-name d-flex align-items-center pt-3 pb-2 pl-3 p-lg-0">
                        <h1 class="mb-0">
                            <a class="logo" href="/" style="background-image: url('./frontEndPackage/images/logo.png')"
                                >Shimadzu
                            </a>
                        </h1>
                        <h2 class="fs-12 ml-5 mb-0 d-none d-sm-block">
                            <a href="/"
                                >台灣島津科學儀器股份有限公司<br /><span>Analytical and Measuring Instruments</span></a
                            >
                        </h2>
                    </div>

                    <button
                        class="navbar-toggler py-3 pr-3 p-lg-0"
                        type="button"
                        data-toggle="collapse"
                        data-target="#mobile-menu"
                        aria-controls="mobile-menu"
                        aria-expanded="false"
                        aria-label="Toggle navigation"
                    >
                        <i class="bi bi-list text-nav menu-icon"></i>
                        <i class="bi bi-x text-nav close-icon d-none"></i>
                    </button>

                    <div class="collapse navbar-collapse mobile-menu" id="mobile-menu">
                        <ul class="navbar-nav ml-auto align-items-center">
                            <li class="nav-item mr-lg-2 position-relative mb-1 mb-lg-0">
                                <a class="nav-link text-nav text-center" id="nav-service" href="###">儀器列表</a>
                            </li>
                            <li class="nav-item mr-lg-2 position-relative mb-1 mb-lg-0">
                                <a class="nav-link text-nav text-center" id="nav-project" href="###">續約</a>
                            </li>
                            <li class="nav-item mr-lg-2 position-relative mb-1 mb-lg-0">
                                <a class="nav-link text-nav text-center" id="nav-entrepreneur" href="###">詢價</a>
                            </li>
                            <li class="nav-item mr-lg-2 position-relative mb-1 mb-lg-0">
                                <a class="nav-link text-nav text-center" id="nav-boss" href="###">線上叫修/其他</a>
                            </li>
                            <li class="nav-item mr-lg-2 position-relative mb-1 mb-lg-0">
                                <a v-if="!isLogin" class="nav-link text-nav text-center" id="nav-member" href="###">註冊/登入</a>
                                <a v-else class="nav-link text-nav text-center" href="###"><i class="bi bi-person-circle fs-24"></i></a>
                            </li>
                        </ul>
                    </div>
                </nav>
                <div class="container d-sm-none mb-brand">
                    <h2 class="fs-12 pb-1 mt-5">
                        <a href="/"
                            >台灣島津科學儀器股份有限公司<br /><span>Analytical and Measuring Instruments</span></a
                        >
                    </h2>
                </div>
            </section> -->
            <Navv :login="isLogin"></Navv>
            <section class="container-lg banner-container">
                <div class="banner-carousel owl-carousel owl-theme">
                    <a v-for="item in bannerCarousel" class="item" :href="item.path">
                        <img :src="item.imgUrl" alt:="item.alt" />
                    </a>
                </div>
            </section>

            <section class="container-lg service-container">
                <div class="row">
                    <div v-for="item in service" :key="item.title" class="col-6 col-lg-3">
                        <div class="item d-flex flex-column align-items-center justify-content-center">
                            <img :src="item.imgSrc" :alt="item.alt" class="mb-3" />
                            <h3 class="fs-18 text-lightBlack mb-0">{{item.title}}</h3>
                        </div>
                    </div>
                </div>
            </section>
            <button
                type="button"
                class="dialog-btn"
                data-toggle="modal"
                data-target="#dialogModal"
                :class="{ 'active': isModalnActive }"
            >
                <i class="bi bi-headset headset-icon"></i>
            </button>

            <div
                class="modal fade"
                id="dialogModal"
                tabindex="-1"
                aria-labelledby="dialogModalLabel"
                aria-hidden="true"
            >
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title d-flex align-items-center" id="dialogModalLabel">
                                <span class="dialog-icon-container mr-2 mr-sm-3"
                                    ><i class="bi bi-headset headset-icon"></i
                                ></span>
                                <div class="d-flex flex-column">
                                    <h3 class="fs-16 mb-0 text-black">島津線上客服</h3>
                                    <span class="grey-text fs-14">客服營業時間: 週一到週五(9:00am-5:30pm)</span>
                                </div>
                            </h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <template v-if="!isChatActive">
                                <p class="text-lightBlack">有什麼需要幫忙的嗎？</p>
                                <ul class="list-unstyled">
                                    <li v-for="item in chatService" :key="item.id">
                                        <a
                                            v-if="!item.detail"
                                            :href="item.path"
                                            class="text-black d-flex align-items-center"
                                        >
                                            <img :src="item.imgUrl" :alt="item.alt" class="mr-2" />{{item.title}}
                                        </a>
                                        <a
                                            v-else
                                            :href="item.path"
                                            class="text-black d-flex align-items-center"
                                            @click="startChat"
                                        >
                                            <img :src="item.imgUrl" :alt="item.alt" class="mr-2" />
                                            <div>
                                                {{item.title}}<br /><span class="grey-text fs-14">{{item.detail}}</span>
                                            </div>
                                        </a>
                                    </li>
                                </ul>
                            </template>
                            <template v-if="isBusinessHours">
                                <div class="ask-topic">
                                    <p>請輸入詢問的主題：</p>
                                    <label for="message-topic" class="w-100 d-flex justify-content-between">
                                        <input type="text" id="message-topic" v-modal.lazy="messageTopic" /><button
                                            type="button"
                                            class="send-btn"
                                        >
                                            <i class="bi bi-send-fill"></i>
                                        </button>
                                    </label>
                                </div>
                            </template>
                            <template v-else>
                                <div
                                    class="d-flex flex-column notInServiceAlert align-items-center justify-content-center"
                                >
                                    <i class="bi bi-exclamation-circle"></i>
                                    <p class="text-center text-darkBlack">
                                        現在非客服時間<br />專人將在營業時間內立刻回覆
                                    </p>
                                    <span class="fs-14 mb-5">客服營業時間：週一到週五(9:00am-5:30pm)</span>
                                    <button type="button">確認</button>
                                </div>
                            </template>
                        </div>
                        <!-- <div class="modal-footer">
                        <button type="button" class="attatch-btn" :disabled="ChatActive">
                            <i class="bi bi-paperclip"></i>
                        </button>
                        <textarea
                            name="message"
                            id=""
                            cols="30"
                            rows="1"
                            placeholder="輸入訊息"
                            :disabled="chatActive"
                        ></textarea>
                        <button type="button" class="send-btn" :disabled="chatActive">
                            <i class="bi bi-send"></i>
                        </button>
                      
                    </div> -->
                    </div>
                </div>
            </div>

            <!-- <Chat></Chat> -->
            <Foooter></Foooter>
        </div>

        <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
        <script
            src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
            integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
            crossorigin="anonymous"
        ></script>
        <script
            src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.min.js"
            integrity="sha384-+sLIOodYLS7CIrQpBjl+C7nPvqq+FbNUBDunl/OZv93DB7Ln/533i8e/mZXLi/P+"
            crossorigin="anonymous"
        ></script>
        <script src="./frontEndPackage/owlcarousel/owl.carousel.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
        <script src="./frontEndPackage/js/all.js"></script>
        <script type="module">
            import Foooter from "./components/footer.js";
            import Navv from "./components/nav.js";
            import Chat from "./components/chatWindow.js";
            const app = new Vue({
                el: "#app",
                data() {
                    return {
                        isModalnActive: false,
                        isChatActive: false,
                        isBusinessHours: null,
                        isLogin: false,
                        messageTopic: "",
                        service: [
                            {
                                imgSrc: "./frontEndPackage/images/home-icon1.png",
                                title: "我的儀器清單",
                                alt: "list",
                            },
                            {
                                imgSrc: "./frontEndPackage/images/home-icon2.png",
                                title: "續約",
                                alt: "contract",
                            },
                            {
                                imgSrc: "./frontEndPackage/images/home-icon3.png",
                                title: "詢價",
                                alt: "inquire",
                            },
                            {
                                imgSrc: "./frontEndPackage/images/home-icon4.png",
                                title: "我的帳號",
                                alt: "account",
                            },
                        ],
                        bannerCarousel: [
                            {
                                id: 1,
                                imgUrl: "./frontEndPackage/images/home-banner1.png",
                                alt: "i-seris",
                                path: "###",
                            },
                            {
                                id: 2,
                                imgUrl: "./frontEndPackage/images/home-banner2.png",
                                alt: "anniversary",
                                path: "###",
                            },
                        ],
                        chatService: [
                            {
                                id: 1,
                                title: "儀器叫修",
                                imgUrl: "./frontEndPackage/images/dialog-icon1.png",
                                alt: "fix",
                                path: "###",
                            },
                            {
                                id: 2,
                                title: "現有儀器操作實驗問題",
                                imgUrl: "./frontEndPackage/images/dialog-icon2.png",
                                alt: "clipboard",
                                path: "###",
                            },
                            {
                                id: 3,
                                title: "產品/分析技術諮詢",
                                imgUrl: "./frontEndPackage/images/dialog-icon3.png",
                                alt: "clipboard",
                                path: "###",
                            },
                            {
                                id: 4,
                                title: "其他需求",
                                imgUrl: "./frontEndPackage/images/dialog-icon4.png",
                                alt: "clipboard",
                                path: "###",
                                detail: "營業時間為週一到週五(9:00am-5:30pm)",
                            },
                        ],
                    };
                },
                methods: {
                    startChat() {
                        this.isChatActive = !this.isChatActive;
                        const currentDate = new Date();
                        const currentHour = currentDate.getHours();
                        const currentMinutes = currentDate.getMinutes();

                        // 定義營業時間的開始和結束時間
                        const businessHoursStart = 9;
                        const businessHoursEnd = 17;
                        const businessMinutesEnd = 30;

                        // 判斷是否在早上9:00 到下午5:30 之間
                        const isBusinessHours =
                            (currentHour > businessHoursStart && currentHour < businessHoursEnd) ||
                            (currentHour === businessHoursStart && currentMinutes >= 0) ||
                            (currentHour === businessHoursEnd && currentMinutes <= businessMinutesEnd);

                        this.isBusinessHours = isBusinessHours;
                        //console.log(this.isBusinessHours);
                    },
                },
                components: {
                    Foooter,
                    Navv,
                    Chat,
                },
                mounted() {
                    $("#dialogModal").on("show.bs.modal", () => {
                        this.isModalnActive = true;
                    });

                    $("#dialogModal").on("hide.bs.modal", () => {
                        this.isModalnActive = false;
                    });
                    this.$nextTick(() => {
                        $(".banner-carousel").owlCarousel({
                            loop: true,
                            autoplay: true,
                            items: 1,
                            autoplayTimeout: 2000,
                            autoplayHoverPause: true,
                            dots: true,
                            nav: false,
                        });
                    });
                },
            });
        </script>
    </body>
</html>
